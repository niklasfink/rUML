function replaceAll(e,r,s){return e.replace(new RegExp(r,"g"),s)}var express=require("express"),fs=require("fs"),app=express(),json=require("json"),bodyParser=require("body-parser"),exec=require("child_process").exec;app.use(express["static"](__dirname+"/public")),app.use(bodyParser.urlencoded({extended:!0})),app.post("/",function(e,r){var s=e.body.code;if(!s)return void r.end("EMPTY ERROR");s="require './dist/_class.rb' \n"+s,s=replaceAll(s,'"','\\"'),s=s.replace(/(\r\n|\n|\r)/gm,'" -e "');var p='ruby -e "'+s+'"';exec(p,function(e,s,p){e?r.end("RUBY ERROR!"):s?r.end(s):r.end("EMPTY ERROR")})}),port=3e3,app.listen(port),console.log("Listening at http://localhost:"+port);